version: '3.8'

services:
  wedding:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # .env 파일에서 환경 변수 읽기 (없으면 빈 값)
        VITE_FIREBASE_API_KEY: ${VITE_FIREBASE_API_KEY:-}
        VITE_FIREBASE_AUTH_DOMAIN: ${VITE_FIREBASE_AUTH_DOMAIN:-}
        VITE_FIREBASE_DATABASE_URL: ${VITE_FIREBASE_DATABASE_URL:-}
        VITE_FIREBASE_PROJECT_ID: ${VITE_FIREBASE_PROJECT_ID:-}
        VITE_FIREBASE_STORAGE_BUCKET: ${VITE_FIREBASE_STORAGE_BUCKET:-}
        VITE_FIREBASE_MESSAGING_SENDER_ID: ${VITE_FIREBASE_MESSAGING_SENDER_ID:-}
        VITE_FIREBASE_APP_ID: ${VITE_FIREBASE_APP_ID:-}
        VITE_KAKAO_MAP_API_KEY: ${VITE_KAKAO_MAP_API_KEY:-}
    env_file:
      - .env
    container_name: wedding-app
    ports:
      - "3000:80"
    restart: unless-stopped
    environment:
      - NODE_ENV=production
    volumes:
      # 필요시 로그 볼륨 마운트
      - ./logs:/var/log/nginx

